-- Fake Death Chaos
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local isFakeDead = false
local offsets = {} -- lưu offset ban đầu

local function enableChaos()
    local char = player.Character
    if not char or not char:FindFirstChild("Humanoid") then return end
    local humanoid = char.Humanoid
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end

    humanoid.PlatformStand = true

    -- Lấy tất cả part chính (Head, Torso, Limbs)
    local parts = {}
    for _, p in ipairs(char:GetDescendants()) do
        if p:IsA("BasePart") and p.Name ~= "HumanoidRootPart" then
            table.insert(parts, p)
            offsets[p] = p.Position - root.Position
        end
    end

    -- Thân nghiêng 90° lên trời hoặc úp xuống (ngẫu nhiên)
    local angleX = math.random(0,1) == 0 and 90 or -90
    root.CFrame = root.CFrame * CFrame.Angles(math.rad(angleX),0,0)

    -- Dịch tay chân ngẫu nhiên 0.1–0.5 studs
    for _, p in ipairs(parts) do
        local dx = (math.random() * 0.4 + 0.1) * (math.random(0,1) == 0 and -1 or 1)
        local dy = (math.random() * 0.4 + 0.1) * (math.random(0,1) == 0 and -1 or 1)
        local dz = (math.random() * 0.4 + 0.1) * (math.random(0,1) == 0 and -1 or 1)
        p.CFrame = p.CFrame + Vector3.new(dx,dy,dz)
    end

    print("Fake Death Chaos ON")
end

local function disableChaos()
    local char = player.Character
    if not char or not char:FindFirstChild("Humanoid") then return end
    local humanoid = char.Humanoid
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end

    humanoid.PlatformStand = false

    -- Đưa tay chân trở về gần vị trí gốc
    for p, offset in pairs(offsets) do
        if p and p.Parent then
            p.CFrame = root.CFrame + offset
        end
    end
    offsets = {}

    print("Fake Death Chaos OFF")
end

local function toggleChaos()
    if not isFakeDead then
        isFakeDead = true
        enableChaos()
    else
        isFakeDead = false
        disableChaos()
    end
end

-- Nhấn Space để toggle
UserInputService.InputBegan:Connect(function(input,gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.Space then
        toggleChaos()
    end
end)
